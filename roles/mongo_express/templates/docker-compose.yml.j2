version: '3.9'
services:
  mongo-express:
    image: {{ global_defaults.mongo_express_image }}
    container_name: mongo-express
    environment:
      ME_CONFIG_MONGODB_ADMINUSERNAME: {{ mongo_root_user }}
      ME_CONFIG_MONGODB_ADMINPASSWORD: {{ mongo_root_password }}
      ME_CONFIG_MONGODB_SERVER: mongo1
      ME_CONFIG_MONGODB_URL: >-
        mongodb://{{ mongo_root_user }}:{{ mongo_root_password | replace('$','$$') }}@mongo1:27017,mongo2:27017,mongo3:27017/?replicaSet={{ mongo_replicaset_name }}&authSource=admin
    networks:
      - internal_db
    ports:
      - 8081:8081

networks:
  internal_net:
    external: true